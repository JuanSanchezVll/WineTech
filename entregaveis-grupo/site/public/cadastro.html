<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - WineTech</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;900&display=swap"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style/site-institucional/cadastro.css">
    
</head>

<body>
    <header>
        <a href="index.html">
            <img src="assets/imgs/logo-preta.svg" alt="WineTech Logo" class="logo">
        </a>
    </header>
    <main class="container">
        <section class="image-side">
            <img src="assets/figuras/barril.png" alt="Barril de vinho">
        </section>

        <section class="form-side">
            <h1>Cadastre-se na <span>WineTech!</span></h1>
            <p>Gerencie seus barris e acompanhe seus vinhos com a melhor tecnologia da WineTech!</p>

            <form>
                <div id="errCNPJ"></div>
                <div class="input-group">
                    <i class="fa-solid fa-id-card"></i>
                    <input oninput="validarCNPJ(), cadastro()" id="inputCNPJ" type="text" placeholder="CNPJ" maxlength="14">
                </div>  
                

                <div id="errRS"></div>
                <div class="input-group">
                    <i class="fa-solid fa-building"></i>
                    <input oninput="validarRS(), cadastro()" id="inputRS" type="text" placeholder="Razão Social" >

                </div>

                <div id="errNF"></div>
                <div class="input-group">
                    <i class="fa-solid fa-store"></i>
                    <input type="text" oninput="validarNF(), cadastro()" id="inputNF"  placeholder="Nome Fantasia" >
                </div>

                <div id="errEmail"></div>
                <div class="input-group">
                    <i class="fa-solid fa-envelope"></i>
                    <input type="email" oninput="verarroba(),validarEmail()" id="inputEmail" placeholder="Email de Contato" >

                </div>

                <button type="button" id="btnCadastro" onclick="cadastro()">Cadastrar</button>
            </form>

            <p class="login">Já tem uma conta? <a href="login.html">Entrar</a></p>
        </section>
    </main>
</body>

<script>

    cnpjValido = false
    razaoSocial = false
    nomeFantasia = false
    email = false
    tem = false


    function validarCNPJ() {

        if(inputCNPJ.value.length != 14 || isNaN(inputCNPJ.value))
        {
            errCNPJ.innerHTML = `<b style="font-size: 9px; color: red;" ">CNPJ DEVE CONTER APENAS 14 NUMEROS</b> <br>`
            cnpjValido = false
            
        } else {

            errCNPJ.innerHTML = ``
            cnpjValido = true
        }
    }

    function validarRS() {

        if(inputRS.value.length < 3)
        {
            errRS.innerHTML = `<b style="font-size: 9px; color: red;" ">RAZÃO SOCIAL DEVE TER MAIS QUE 3 CARACTERES!</b> <br>`
            razaoSocial = false
            
        } else {

            errRS.innerHTML = ``
            razaoSocial = true
        }
        
    }

      function validarNF() {

        if(inputNF.value.length < 3)
        {
            errNF.innerHTML = `<b style="font-size: 9px; color: red;" ">NOME FANTASIA DEVE TER MAIS QUE 3 CARACTERES!</b> <br>`
            nomeFantasia = false
            
        } else {

            errNF.innerHTML = ``
            nomeFantasia = true
        }
        
    }

         function verarroba() {

            for (let index = 0; index < inputEmail.value.length; index++) {
                if (inputEmail.value[index] === '@') {
                    tem = true
                    break
                    
                } else {
                    tem = false
                    
                
                }
                
            }
            
        }

    function validarEmail() {
            
        
            if (tem) {
                errEmail.innerHTML = ``
                email = true

                
            } else {
                errEmail.innerHTML = `<b style="font-size: 9px; color: red;" ">Insira um Email valido (que inclua "@" e ".")</b> <br>`
                email = false
            }

    }


    function cadastro() {

        const btnCad = document.getElementById('btnCadastro')
        
        if (cnpjValido == true && razaoSocial == true && nomeFantasia == true && email == true) {
            btnCad.onclick = function () { location.href='cadastro-funcionario.html' }

        } else{
            console.log(cnpjValido, razaoSocial,nomeFantasia, email);
            btnCad.onclick = function () { alert("Complete o cadastro antes de seguir!")}
            
        }

        
    }


</script>

</html>